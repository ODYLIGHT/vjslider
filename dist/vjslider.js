"use strict";function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,i){for(var t=0;t<i.length;t++){var n=i[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(i,t,n){return t&&e(i.prototype,t),n&&e(i,n),i}}(),VJSlider=function(){function e(i){if(_classCallCheck(this,e),this.sliderElement=i,this.slides=Array.prototype.slice.call(this.sliderElement.children),this.slidesCount=this.slides.length,0===this.slidesCount)throw new DOMException("Slider does not contain any children (slides)");this.currentSlide=0,this.numberOfClones=0,this.transitionEndCallback=null,this.init()}return _createClass(e,[{key:"init",value:function(){this._build(),this.numberOfClones=this._createSlideClones(2),this._transitionEnd(),this.sliderElement.style.width=100*(this.slides.length+2*this.numberOfClones)+"%",this.slide(1)}},{key:"slide",value:function(e){var i=this;return this.currentSlide=e,this.sliderElement.classList.add("vjslider__slider--animate"),this._moveTo(this.currentSlide),this.currentSlide>this.slidesCount?(this.transitionEndCallback=function(){i.currentSlide=1},this.currentSlide):(this.currentSlide<=0&&(this.transitionEndCallback=function(){i.currentSlide=i.slidesCount}),this.currentSlide)}},{key:"next",value:function(){return this.slide(this.currentSlide+1)}},{key:"prev",value:function(){return this.slide(this.currentSlide-1)}},{key:"_build",value:function(){var e=this.sliderElement.parentNode,i=document.createElement("div");i.className="vjslider",e.replaceChild(i,this.sliderElement),i.appendChild(this.sliderElement),this.sliderElement.classList.add("vjslider__slider"),this.slides.forEach(function(e){return e.classList.add("vjslider__slide")})}},{key:"_createSlideClones",value:function(e){var i=this,t=this.slides.slice(0,e),n=this.slides.slice(-1*e);return t=this._fillMissing(t,e,this.slides[0]),n=this._fillMissing(n,e,this.slides[this.slides.length-1]),t.forEach(function(e){var t=e.cloneNode(!0);t.classList.add("vjslider__clone"),i.sliderElement.appendChild(t)}),n.reverse().forEach(function(e){var t=e.cloneNode(!0);t.classList.add("vjslider__clone"),i.sliderElement.insertBefore(t,i.sliderElement.firstChild)}),e}},{key:"_fillMissing",value:function(e,i,t){for(;e.length<i;)e.push(t);return e}},{key:"_transitionEnd",value:function(){var e=this,i=["oTransitionEnd","MSTransitionEnd","msTransitionEnd","transitionend","webkitTransitionEnd"];i.forEach(function(i){e.sliderElement.addEventListener(i,function(){e._isFunction(e.transitionEndCallback)&&(e.transitionEndCallback=e.transitionEndCallback(),e.sliderElement.classList.remove("vjslider__slider--animate"),e._moveTo(e.currentSlide))})})}},{key:"_isFunction",value:function(e){return Boolean(e&&e.constructor&&e.call&&e.apply)}},{key:"_moveTo",value:function(e){this.sliderElement.style.transform="translate3d(-"+this._calculatePosition(e)+"%, 0, 0)"}},{key:"_calculatePosition",value:function(e){return 100*(e+this.numberOfClones-1)/(this.slidesCount+2*this.numberOfClones)}}]),e}();